#Â Set here the list of the tabs to be displayed
tabs: [ "Virtual hardware", "Galaxy"]

# Set here a new set of inputs to be displayed
inputs:

  instance_flavor:
    display_name: "Instance flavour"
    type: "select"
    description: "CPUs, memory size (RAM), root disk size"
    constraints: 
      - { value: "medium", label: "Medium (2 cpu, 4 GB RAM, 20 GB dsk)" }
      - { value: "large", label: "Large (4 cpu, 8 GB RAM, 20 GB dsk)" }
      - { value: "xlarge", label: "Large (8 cpu, 16 GB RAM, 20 GB dsk)" }
      - { value: "xxlarge", label: "Large (16 cpu, 32 GB RAM, 20 GB dsk)" }
    tab: "Virtual hardware"

  storage_size:
    display_name: "Storage volume size"
    type: "select"
    description: "Select storage size"
    constraints:
      - { value: "50 GB", label: "50 GB" }
      - { value: "100 GB", label: "100 GB" }
    tab: "Virtual hardware"

  os_distribution:
    type: hidden
    default: centos
  os_version:
    type: hidden
    default: 7

    #os_distribution:
    #  display_name: 'OS'
    #  type: 'select'
    #  description: Operating System distribution
    #  constraints:
    #    - { value: 'centos', label: 'CentOS' }
    #    - { value: 'ubuntu', label: 'Ubuntu' }
    #  tab: "Virtual hardware"

    #os_version:
    #  type: dependent_select
    #  parent: os_distribution
    #  description: Operating System version
    #  default: '16.04'
    #  constraints:
    #    - { value: "16.04", label: "16.04", parent_value: "ubuntu" }
    #    - { value: "20.04", label: "20.04", parent_value: "ubuntu" }
    #    - { value: "7",     label: "7",     parent_value: "centos" }
    #  tab: "Virtual hardware"

  version:
    display_name: "Galaxy version"
    type: "select"
    description: "Galaxy release 19.05 recommended"
    constraints:
      - { value: "release_20.05", label: "Galaxy release 20.05" }
      - { value: "release_20.09", label: "Galaxy release 20.09" }
      - { value: "release_21.05", label: "Galaxy release 21.05" }
      - { value: "release_21.09", label: "Galaxy release 21.09" }
      - { value: "release_22.01", label: "Galaxy release 22.01" }
    tab: "Galaxy"

  instance_description:
    display_name: "Instance description"
    type: "text"
    description: "Set Galaxy Brand"
    default: "ELIXIR-ITALY"
    tab: "Galaxy"

  admin_email:
    display_name: "Galaxy administrator e-mail"
    type: "email"
    description: "Type a valid e-mail address."
    tab: "Galaxy"
    required: yes

  admin_password:
    display_name: "Galaxy administrator password"
    type: secret
    description: "Type a valid administrator password."
    tab: "Galaxy"
    required: yes
  vault_token:
    type: vault_token
  vault_secrets_path:
    default: "sub/dep.uuid"
    type: secrets_path
  vault_secrets_action:
    default: 'read'
    type: secrets_action

  enable_interactive_tools:
    default: true
    type: hidden
  export_dir:
    default: /export
    type: hidden

  storage_encryption:
    display_name: "Enable encryption"
    type: "toggle"
    description: "Encrypt instance external storage"
    constraints:
      - { value: "True", label: "On" }
    tab: "Virtual hardware"

  vault_encryption_token:
    default: { "policy": "write" }
    type: vault_token
  vault_encryption_path:
    type: hidden
  vault_encryption_key:
    default: 'storage_encryption_key'
    type: hidden

  users:
    type: ssh_user

  flavor:
    display_name: "Galaxy flavours"
    type: "select"
    description: "Load Galaxy tools preset"
    constraints:
      - { value: "galaxy-minimal", label: "Galaxy minimal" }
      - { value: "galaxy-testing", label: "Galaxy testing" }
      - { value: "galaxy-CoVaCS", label: "Galaxy CoVaCS" }
      - { value: "galaxy-GDC_Somatic_Variant", label: "Galaxy GDC Somatic Variant Calling" }
      - { value: "galaxy-rna-workbench", label: "Galaxy RNA workbench" }
      - { value: "galaxy-epigen", label: "Galaxy Epigen" }
      - { value: "galaxy-pillar", label: "Galaxy Somatic Variant Detection" }
    tab: "Galaxy"

outputs:
  os_users:
    type: ssh_user
